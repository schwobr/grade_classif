---

title: Reading data 
keywords: fastai
sidebar: home_sidebar

summary: "Defines utilities function for reading and manipulating data"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/10_data.read.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_items" class="doc_header"><code>get_items</code><a href="https://github.com/schwobr/grade_classif/tree/master/grade_classif/data/read.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_items</code>(<strong><code>folder</code></strong>, <strong><code>label_func</code></strong>, <strong><code>recurse</code></strong>=<em><code>True</code></em>, <strong><code>extensions</code></strong>=<em><code>None</code></em>, <strong><code>include</code></strong>=<em><code>None</code></em>, <strong><code>exclude</code></strong>=<em><code>None</code></em>, <strong><code>filterfunc</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Loads all items and labels in <code>folder</code>. Items are stored as <code>Path</code> objects. Labels are computed for each item using <code>label_func</code>. By default, the search will happen recursively in all subfolders. To disable this behaviour, use <code>recurse=False</code>. You can also specify a list of <code>extensions</code> to restrict the accepted files, as well as <code>include</code> and <code>exclude</code> folders (as <code>str</code>, these are direct subfolders of <code>folder</code>). <code>filterfunc</code> can be used to only accept objects for which it returns <code>True</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_scan" class="doc_header"><code>get_scan</code><a href="https://github.com/schwobr/grade_classif/tree/master/grade_classif/data/read.py#L39" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_scan</code>(<strong><code>folder</code></strong>, <strong><code>scan_name</code></strong>, <strong><code>include</code></strong>=<em><code>None</code></em>, <strong><code>exclude</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Return a <code>Path</code> object to the folder corresponding to a <code>scan</code> name in a specific <code>folder</code>. Direct subfolders can be include or excluded using respectively <code>include</code> and <code>exclude</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_scan</span><span class="p">(</span><span class="n">DATA</span><span class="p">,</span> <span class="s1">&#39;CF_PACS04rescan_10F0051&#39;</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>PosixPath(&#39;/work/stages/schwob/Patches_240/Patches_MGI_240_2/3/CF_PACS04rescan_10F0051&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split" class="doc_header"><code>split</code><a href="https://github.com/schwobr/grade_classif/tree/master/grade_classif/data/read.py#L52" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split</code>(<strong><code>scans</code></strong>, <strong><code>grades</code></strong>, <strong><code>valid_pct</code></strong>=<em><code>0.2</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using a list of scan names <code>scans</code>,a list of grades <code>grades</code> (both as strings) and ratio for the validation set's size <code>valid_pct</code>, splits the dataset between training and validation sets. Returns a list of <code>'train'</code> and <code>'valid'</code> strings so that each scan is associated to a set. Lists are reordered inside the function so that the splitting is random. Proportions of grades 1 and 3 are preserved in each subset.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_csv" class="doc_header"><code>create_csv</code><a href="https://github.com/schwobr/grade_classif/tree/master/grade_classif/data/read.py#L79" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_csv</code>(<strong><code>csv_path</code></strong>, <strong><code>data_path</code></strong>, <strong><code>label_func</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Creates a csv that contains all scan names, with the associated grade and subset they are in. Scans are found in the folder contained in <code>data_path</code> (<code>Path</code> object). Doubles are deleted. The file is then stored in <code>csv_path</code>. You can specify a <code>label_func</code> to compute how the grade is to be extracted from the path to a patch. Returns the corresponding dataframe.</p>

</div>
</div>
</div>
</div>
 

